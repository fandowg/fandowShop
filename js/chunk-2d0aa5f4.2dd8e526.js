(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa5f4"],{1175:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("v-dialog"),"OrderDone"===t.routeName?s("div",{staticClass:"alert-box"},[t._m(0),s("p",[t._v(" 親愛的顧客您好，您已付款成功，商品將於 2 日內送達，若喜歡我們的商品，歡迎關注我們的最新消息喔。 ")])]):t._e(),s("h2",{staticClass:"page__title--sm"},[t._v("商品明細")]),s("div",{staticClass:"cart no-delete"},[t._m(1),s("div",{staticClass:"cart__list"},t._l(t.order.products,(function(a,e){return s("div",{key:e,staticClass:"cart__row bag-row no-gutters"},[s("div",{staticClass:"cart__item bag-3 bag-md-2 cart__img"},[s("img",{attrs:{src:a.product.imageUrl,alt:"item.product.title"}})]),s("div",{staticClass:"bag-7 bag-md-8 bag-row no-gutters cart__group"},[s("div",{staticClass:"cart__item cart__title bag-md-8"},[t._v(" "+t._s(a.product.title)+" ")]),s("div",{staticClass:"cart__item cart__num bag-md-4"},[s("span",{staticClass:"cart__num__content no-padding"},[t._v(t._s(a.qty)+t._s(a.product.unit))])])]),s("div",{staticClass:"bag cart__item cart__price"},[t._v(" "+t._s(t._f("currency")(a.final_total))+" ")])])})),0),s("div",{staticClass:"cart__bottom"},[s("div",{staticClass:"cart__total"},[s("div",{staticClass:"cart__total__row"},[s("span",{staticClass:"cart__total__row__title"},[t._v("總額：")]),s("span",{staticClass:"cart__total__row__content text-danger"},[t._v(" "+t._s(t._f("currency")(t.order.total))+" ")])])])])]),s("h2",{staticClass:"page__title--sm"},[t._v("訂購人資訊")]),s("div",{staticClass:"order-detail"},[s("div",{staticClass:"order-detail__row"},[s("div",{staticClass:"order-detail__title"},[t._v("姓名")]),s("div",{staticClass:"order-detail__content"},[t._v(t._s(t.order.user.name))])]),s("div",{staticClass:"order-detail__row"},[s("div",{staticClass:"order-detail__title"},[t._v("手機")]),s("div",{staticClass:"order-detail__content"},[t._v(t._s(t.order.user.tel))])]),s("div",{staticClass:"order-detail__row"},[s("div",{staticClass:"order-detail__title"},[t._v("email")]),s("div",{staticClass:"order-detail__content"},[t._v(t._s(t.order.user.email))])]),s("div",{staticClass:"order-detail__row"},[s("div",{staticClass:"order-detail__title"},[t._v("收件人地址")]),s("div",{staticClass:"order-detail__content"},[t._v(" "+t._s(t.order.user.address)+" ")])]),s("div",{staticClass:"order-detail__row"},[s("div",{staticClass:"order-detail__title"},[t._v("備註")]),s("div",{staticClass:"order-detail__content"},[t._v(t._s(t.order.message))])]),s("div",{staticClass:"order-detail__row"},[s("div",{staticClass:"order-detail__title"},[t._v("付款狀態")]),s("div",{staticClass:"order-detail__content"},[t.order.is_paid?s("span",{staticClass:"text-success"},[t._v("已付款")]):s("span",{staticClass:"text-danger"},[t._v("未付款")])])])]),s("div",{staticClass:"btn-wrapper-side"},["Payment"===t.routeName?s("button",{staticClass:"btn btn-primary",on:{click:t.payOrder}},[t._v(" 確認付款 ")]):t._e(),"OrderDone"===t.routeName?s("router-link",{staticClass:"btn btn-primary",attrs:{to:"/product-list"}},[t._v("繼續逛逛")]):t._e()],1)],1)},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("h1",{staticClass:"page__title"},[s("i",{staticClass:"far fa-check-circle"}),t._v("感謝你的購買 ")])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"cart__head bag-row no-gutters"},[s("div",{staticClass:"cart__item"},[t._v("產品")]),s("div",{staticClass:"cart__item"},[t._v("數量")]),s("div",{staticClass:"cart__item"},[t._v("價格")])])}],i=(s("99af"),s("b0c0"),s("5530")),c=s("2f62"),d={data:function(){return{order:{user:{}}}},computed:Object(i["a"])({orderId:function(){return this.$route.params.id},routeName:function(){return this.$route.name}},Object(c["c"])("cartModules",["cart"])),methods:Object(i["a"])({getOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/order/").concat(this.orderId);this.$store.commit("LOADING",!0),this.$http.get(a).then((function(a){a.data.success&&(t.order=a.data.order,null===a.data.order&&t.$bus.$emit("message:push","訂單不存在","text-danger")),t.$store.commit("LOADING",!1)}))},payOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/pay/").concat(this.orderId);this.$store.commit("LOADING",!0),this.$http.post(a).then((function(a){a.data.success&&(t.$bus.$emit("message:push",a.data.message),t.getOrder(),t.$router.push({name:"OrderDone",params:{id:t.orderId}})),t.$store.commit("LOADING",!1)}))}},Object(c["b"])("cartModules",["getCart"])),created:function(){this.getOrder()},beforeRouteLeave:function(t,a,s){var e=this;"OrderDone"===a.name&&"Payment"===t.name&&s({path:"/"}),"OrderDone"===t.name||"OrderDone"===a.name||this.order.is_paid?s():this.$modal.show("dialog",{text:"您尚未付款，確定要離開嗎？",buttons:[{title:"取消",handler:function(){e.$modal.hide("dialog"),s(!1)}},{title:"確定",handler:function(){s()}}]})}},o=d,_=s("2877"),l=Object(_["a"])(o,e,r,!1,null,null,null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0aa5f4.2dd8e526.js.map