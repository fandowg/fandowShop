{"version":3,"sources":["webpack:///./src/views/CheckCart.vue?bfb7","webpack:///src/views/CheckCart.vue","webpack:///./src/views/CheckCart.vue?0050","webpack:///./src/views/CheckCart.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","cart","carts","length","attrs","_m","_l","item","key","id","product","imageUrl","title","_s","_e","on","$event","addToCart","product_id","qty","maxQty","_f","final_total","deleteCart","directives","name","rawName","value","expression","domProps","target","composing","coupon","checkCoupon","couponSuccess","errorMessage","total","staticRenderFns","data","computed","methods","$store","commit","$http","post","url","response","success","dispatch","created","beforeRouteLeave","to","$modal","show","text","buttons","next","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,OAAO,CAACE,YAAY,8BAA8B,CAACF,EAAG,YAAYA,EAAG,KAAK,CAACE,YAAY,eAAe,CAACN,EAAIO,GAAG,WAAsC,IAA1BP,EAAIQ,KAAKC,MAAMC,OAAcN,EAAG,MAAM,CAACA,EAAG,IAAI,CAACJ,EAAIO,GAAG,+BAA+BH,EAAG,cAAc,CAACE,YAAY,kBAAkBK,MAAM,CAAC,GAAK,kBAAkB,CAACX,EAAIO,GAAG,WAAW,GAAGH,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACN,EAAIY,GAAG,GAAGR,EAAG,MAAM,CAACE,YAAY,cAAcN,EAAIa,GAAIb,EAAIQ,KAAU,OAAE,SAASM,GAAM,OAAOV,EAAG,MAAM,CAACW,IAAID,EAAKE,GAAGV,YAAY,gCAAgC,CAACF,EAAG,MAAM,CAACE,YAAY,uCAAuC,CAACF,EAAG,MAAM,CAACO,MAAM,CAAC,IAAMG,EAAKG,QAAQC,SAAS,IAAMJ,EAAKG,QAAQE,WAAWf,EAAG,MAAM,CAACE,YAAY,iDAAiD,CAACF,EAAG,MAAM,CAACE,YAAY,mCAAmC,CAACN,EAAIO,GAAG,IAAIP,EAAIoB,GAAGN,EAAKG,QAAQE,QAAQf,EAAG,MAAOU,EAAW,OAAEV,EAAG,OAAO,CAACE,YAAY,gBAAgB,CAACN,EAAIO,GAAG,YAAYP,EAAIqB,OAAOjB,EAAG,MAAM,CAACE,YAAY,iCAAiC,CAACF,EAAG,SAAS,CAACE,YAAY,iCAAiCgB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAIwB,UAAUV,EAAKW,YAAa,MAAM,CAACzB,EAAIO,GAAG,SAASH,EAAG,OAAO,CAACE,YAAY,sBAAsB,CAACN,EAAIO,GAAGP,EAAIoB,GAAGN,EAAKY,QAAQtB,EAAG,SAAS,CAACE,YAAY,iCAAiCK,MAAM,CAAC,SAAWG,EAAKY,KAAO1B,EAAI2B,QAAQL,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAIwB,UAAUV,EAAKW,WAAY,MAAM,CAACzB,EAAIO,GAAG,aAAaH,EAAG,MAAM,CAACE,YAAY,sCAAsC,CAACF,EAAG,MAAM,CAACE,YAAY,mCAAmC,CAACN,EAAIO,GAAG,IAAIP,EAAIoB,GAAGpB,EAAI4B,GAAG,WAAP5B,CAAmBc,EAAKe,cAAc,OAAOzB,EAAG,MAAM,CAACE,YAAY,oCAAoC,CAACF,EAAG,SAAS,CAACE,YAAY,cAAcgB,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOvB,EAAI8B,WAAWhB,EAAKE,OAAO,CAACZ,EAAG,IAAI,CAACE,YAAY,4BAA2B,GAAGF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,QAAQ,CAAC2B,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOlC,EAAU,OAAEmC,WAAW,WAAW7B,YAAY,eAAeK,MAAM,CAAC,KAAO,OAAO,YAAc,UAAUyB,SAAS,CAAC,MAASpC,EAAU,QAAGsB,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOc,OAAOC,YAAqBtC,EAAIuC,OAAOhB,EAAOc,OAAOH,WAAU9B,EAAG,SAAS,CAACE,YAAY,0BAA0BgB,GAAG,CAAC,MAAQtB,EAAIwC,cAAc,CAACxC,EAAIO,GAAG,YAAcP,EAAIyC,cAAqGzC,EAAIqB,KAA1FjB,EAAG,OAAO,CAACE,YAAY,uBAAuB,CAACN,EAAIO,GAAG,IAAIP,EAAIoB,GAAGpB,EAAI0C,mBAA4BtC,EAAG,MAAM,CAACE,YAAY,eAAe,CAAEN,EAAIQ,KAAKmC,QAAU3C,EAAIQ,KAAKqB,YAAazB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,OAAO,CAACE,YAAY,2BAA2B,CAACN,EAAIO,GAAG,SAASH,EAAG,OAAO,CAACE,YAAY,6BAA6B,CAACN,EAAIO,GAAG,IAAIP,EAAIoB,GAAGpB,EAAI4B,GAAG,WAAP5B,CAAmBA,EAAIQ,KAAKmC,aAAa3C,EAAIqB,KAAMrB,EAAIQ,KAAKmC,QAAU3C,EAAIQ,KAAKqB,YAAazB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,OAAO,CAACE,YAAY,2BAA2B,CAACN,EAAIO,GAAG,SAASH,EAAG,OAAO,CAACE,YAAY,0CAA0C,CAACN,EAAIO,GAAG,IAAIP,EAAIoB,GAAGpB,EAAI4B,GAAG,WAAP5B,CAAoBA,EAAIQ,KAAKmC,MAAQ3C,EAAIQ,KAAKqB,cAAe,SAAS7B,EAAIqB,KAAKjB,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,OAAO,CAACE,YAAY,2BAA2B,CAACN,EAAIO,GAAG,SAASH,EAAG,OAAO,CAACE,YAAY,yCAAyC,CAACN,EAAIO,GAAG,IAAIP,EAAIoB,GAAGpB,EAAI4B,GAAG,WAAP5B,CAAmBA,EAAIQ,KAAKqB,cAAc,eAAezB,EAAG,MAAM,CAACE,YAAY,kCAAkC,CAACF,EAAG,cAAc,CAACE,YAAY,0BAA0BK,MAAM,CAAC,GAAK,kBAAkB,CAACX,EAAIO,GAAG,UAAUH,EAAG,cAAc,CAACE,YAAY,kBAAkBK,MAAM,CAAC,GAAK,sBAAsB,CAACX,EAAIO,GAAG,WAAW,MAAM,IAC3jHqC,EAAkB,CAAC,WAAa,IAAI5C,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iCAAiC,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIO,GAAG,QAAQH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIO,GAAG,QAAQH,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIO,GAAG,Y,8CCuHtT,GACEsC,KADF,WAEI,MAAO,CACLN,OAAQ,GACRG,aAAc,GACdD,eAAe,EACfd,OAAQ,OAGZmB,SAAU,OAAZ,OAAY,CAAZ,GACA,wCAEEC,QAAS,OAAX,OAAW,CAAX,CACIP,YADJ,WACA,WACA,sFACMvC,KAAK+C,OAAOC,OAAO,WAAW,GAC9BhD,KAAKiD,MAAMC,KAAKC,EAAK,CAA3B,4CACYC,EAASR,KAAKS,SAChB,EAAV,iBACU,EAAV,YAEU,EAAV,iBACU,EAAV,6BAEQ,EAAR,gCAGI9B,UAfJ,SAeA,KACMvB,KAAK+C,OAAOO,SAAS,wBAAyB,CAApD,eAEA,wDAEEC,QAhCF,aAiCEC,iBAjCF,SAiCA,kBACoB,cAAZC,EAAG1B,MAAmD,IAA3B/B,KAAKO,KAAKC,MAAMC,OAC7CT,KAAK0D,OAAOC,KAAK,SAAU,CACzBC,KAAM,SAAd,6CACQC,QAAS,CACjB,CACU,MAAV,KACU,QAAV,WACY,EAAZ,sBACY,GAAZ,KAGA,CACU,MAAV,KACU,QAAV,WACY,SAMNC,MC9K6U,I,YCO/UC,EAAY,eACd,EACAjE,EACA6C,GACA,EACA,KACA,KACA,MAIa,aAAAoB,E","file":"js/chunk-2d0bd63e.7b09d7fe.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('main',{staticClass:\"page page--pt container-lg\"},[_c('v-dialog'),_c('h1',{staticClass:\"page__title\"},[_vm._v(\"購物車清單\")]),(_vm.cart.carts.length === 0)?_c('div',[_c('p',[_vm._v(\"您的購物車還沒有任何內容，趕快來挑選你喜歡的水瓶吧\")]),_c('router-link',{staticClass:\"btn btn-primary\",attrs:{\"to\":\"/product-list\"}},[_vm._v(\"前往購物\")])],1):_c('div',[_c('div',{staticClass:\"cart\"},[_vm._m(0),_c('div',{staticClass:\"cart__list\"},_vm._l((_vm.cart.carts),function(item){return _c('div',{key:item.id,staticClass:\"cart__row bag-row no-gutters\"},[_c('div',{staticClass:\"cart__item bag-md-2 bag-3 cart__img\"},[_c('img',{attrs:{\"src\":item.product.imageUrl,\"alt\":item.product.title}})]),_c('div',{staticClass:\"bag-7 bag-md-8 bag-row no-gutters cart__group\"},[_c('div',{staticClass:\"cart__item cart__title bag-md-8\"},[_vm._v(\" \"+_vm._s(item.product.title)),_c('br'),(item.coupon)?_c('span',{staticClass:\"text-success\"},[_vm._v(\"已套用優惠券\")]):_vm._e()]),_c('div',{staticClass:\"cart__item cart__num bag-md-4\"},[_c('button',{staticClass:\"btn btn-outline-primary btn-sm\",on:{\"click\":function($event){return _vm.addToCart(item.product_id, -1)}}},[_vm._v(\" - \")]),_c('span',{staticClass:\"cart__num__content\"},[_vm._v(_vm._s(item.qty))]),_c('button',{staticClass:\"btn btn-outline-primary btn-sm\",attrs:{\"disabled\":item.qty >= _vm.maxQty},on:{\"click\":function($event){return _vm.addToCart(item.product_id, 1)}}},[_vm._v(\" + \")])])]),_c('div',{staticClass:\"bag bag-row no-gutters cart__group\"},[_c('div',{staticClass:\"cart__item bag-md-9 cart__price\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(item.final_total))+\" \")]),_c('div',{staticClass:\"cart__item bag-md-3 cart__delete\"},[_c('button',{staticClass:\"button-none\",on:{\"click\":function($event){return _vm.deleteCart(item.id)}}},[_c('i',{staticClass:\"fas fa-trash\"})])])])])}),0),_c('div',{staticClass:\"cart__bottom\"},[_c('div',{staticClass:\"coupon\"},[_c('div',{staticClass:\"input-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.coupon),expression:\"coupon\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"請輸入優惠碼\"},domProps:{\"value\":(_vm.coupon)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.coupon=$event.target.value}}}),_c('button',{staticClass:\"btn btn-outline-primary\",on:{\"click\":_vm.checkCoupon}},[_vm._v(\" 套用 \")])]),(!_vm.couponSuccess)?_c('span',{staticClass:\"text-danger-message\"},[_vm._v(\" \"+_vm._s(_vm.errorMessage))]):_vm._e()]),_c('div',{staticClass:\"cart__total\"},[(_vm.cart.total !== _vm.cart.final_total)?_c('div',{staticClass:\"cart__total__row\"},[_c('span',{staticClass:\"cart__total__row__title\"},[_vm._v(\"總額：\")]),_c('span',{staticClass:\"cart__total__row__content\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(_vm.cart.total)))])]):_vm._e(),(_vm.cart.total !== _vm.cart.final_total)?_c('div',{staticClass:\"cart__total__row\"},[_c('span',{staticClass:\"cart__total__row__title\"},[_vm._v(\"折扣：\")]),_c('span',{staticClass:\"cart__total__row__content text-success\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")((_vm.cart.total - _vm.cart.final_total)))+\" \")])]):_vm._e(),_c('div',{staticClass:\"cart__total__row\"},[_c('span',{staticClass:\"cart__total__row__title\"},[_vm._v(\"應付：\")]),_c('span',{staticClass:\"cart__total__row__content text-danger\"},[_vm._v(\" \"+_vm._s(_vm._f(\"currency\")(_vm.cart.final_total))+\" \")])])])])]),_c('div',{staticClass:\"btn-wrapper-side delete-spacer\"},[_c('router-link',{staticClass:\"btn btn-outline-primary\",attrs:{\"to\":\"/product-list\"}},[_vm._v(\"繼續購物\")]),_c('router-link',{staticClass:\"btn btn-primary\",attrs:{\"to\":\"/order/order-info\"}},[_vm._v(\"確認送出\")])],1)])],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cart__head bag-row no-gutters\"},[_c('div',{staticClass:\"cart__item\"},[_vm._v(\"產品\")]),_c('div',{staticClass:\"cart__item\"},[_vm._v(\"數量\")]),_c('div',{staticClass:\"cart__item\"},[_vm._v(\"價格\")])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <main class=\"page page--pt container-lg\">\r\n    <v-dialog />\r\n    <h1 class=\"page__title\">購物車清單</h1>\r\n    <div v-if=\"cart.carts.length === 0\">\r\n      <p>您的購物車還沒有任何內容，趕快來挑選你喜歡的水瓶吧</p>\r\n      <router-link class=\"btn btn-primary\" to=\"/product-list\"\r\n        >前往購物</router-link\r\n      >\r\n    </div>\r\n    <div v-else>\r\n      <div class=\"cart\">\r\n        <div class=\"cart__head bag-row no-gutters\">\r\n          <div class=\"cart__item\">產品</div>\r\n          <div class=\"cart__item\">數量</div>\r\n          <div class=\"cart__item\">價格</div>\r\n        </div>\r\n        <div class=\"cart__list\">\r\n          <div\r\n            class=\"cart__row bag-row no-gutters\"\r\n            v-for=\"item in cart.carts\"\r\n            :key=\"item.id\"\r\n          >\r\n            <div class=\"cart__item bag-md-2 bag-3 cart__img\">\r\n              <img :src=\"item.product.imageUrl\" :alt=\"item.product.title\" />\r\n            </div>\r\n            <div class=\"bag-7 bag-md-8 bag-row no-gutters cart__group\">\r\n              <div class=\"cart__item cart__title bag-md-8\">\r\n                {{ item.product.title }}<br />\r\n                <span class=\"text-success\" v-if=\"item.coupon\"\r\n                  >已套用優惠券</span\r\n                >\r\n              </div>\r\n              <div class=\"cart__item cart__num bag-md-4\">\r\n                <button\r\n                  class=\"btn btn-outline-primary btn-sm\"\r\n                  @click=\"addToCart(item.product_id, -1)\"\r\n                >\r\n                  -\r\n                </button>\r\n                <span class=\"cart__num__content\">{{ item.qty }}</span>\r\n                <button\r\n                  class=\"btn btn-outline-primary btn-sm\"\r\n                  :disabled=\"item.qty >= maxQty\"\r\n                  @click=\"addToCart(item.product_id, 1)\"\r\n                >\r\n                  +\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <div class=\"bag bag-row no-gutters cart__group\">\r\n              <div class=\"cart__item bag-md-9 cart__price\">\r\n                {{ item.final_total | currency }}\r\n              </div>\r\n              <div class=\"cart__item bag-md-3 cart__delete\">\r\n                <button class=\"button-none\" @click=\"deleteCart(item.id)\">\r\n                  <i class=\"fas fa-trash\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"cart__bottom\">\r\n          <div class=\"coupon\">\r\n            <div class=\"input-group\">\r\n              <input\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                placeholder=\"請輸入優惠碼\"\r\n                v-model=\"coupon\"\r\n              />\r\n              <button class=\"btn btn-outline-primary\" @click=\"checkCoupon\">\r\n                套用\r\n              </button>\r\n            </div>\r\n            <span class=\"text-danger-message\" v-if=\"!couponSuccess\">\r\n              {{ errorMessage }}</span\r\n            >\r\n          </div>\r\n          <div class=\"cart__total\">\r\n            <div\r\n              class=\"cart__total__row\"\r\n              v-if=\"cart.total !== cart.final_total\"\r\n            >\r\n              <span class=\"cart__total__row__title\">總額：</span>\r\n              <span class=\"cart__total__row__content\">\r\n                {{ cart.total | currency }}</span\r\n              >\r\n            </div>\r\n            <div\r\n              class=\"cart__total__row\"\r\n              v-if=\"cart.total !== cart.final_total\"\r\n            >\r\n              <span class=\"cart__total__row__title\">折扣：</span>\r\n              <span class=\"cart__total__row__content text-success\">\r\n                {{ (cart.total - cart.final_total) | currency }}\r\n              </span>\r\n            </div>\r\n            <div class=\"cart__total__row\">\r\n              <span class=\"cart__total__row__title\">應付：</span>\r\n              <span class=\"cart__total__row__content text-danger\">\r\n                {{ cart.final_total | currency }}\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"btn-wrapper-side delete-spacer\">\r\n        <router-link class=\"btn btn-outline-primary\" to=\"/product-list\"\r\n          >繼續購物</router-link\r\n        >\r\n        <router-link to=\"/order/order-info\" class=\"btn btn-primary\"\r\n          >確認送出</router-link\r\n        >\r\n      </div>\r\n    </div>\r\n  </main>\r\n</template>\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nexport default {\r\n  data () {\r\n    return {\r\n      coupon: '',\r\n      errorMessage: '',\r\n      couponSuccess: true,\r\n      maxQty: process.env.VUE_APP_MAX_QTY\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('cartModules', ['cart'])\r\n  },\r\n  methods: {\r\n    checkCoupon () {\r\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/coupon`\r\n      this.$store.commit('LOADING', true)\r\n      this.$http.post(url, { data: { code: this.coupon } }).then((response) => {\r\n        if (response.data.success) {\r\n          this.couponSuccess = true\r\n          this.getCart()\r\n        } else {\r\n          this.couponSuccess = false\r\n          this.errorMessage = response.data.message\r\n        }\r\n        this.$store.commit('LOADING', false)\r\n      })\r\n    },\r\n    addToCart (id, qty) {\r\n      this.$store.dispatch('cartModules/addToCart', { id, qty })\r\n    },\r\n    ...mapActions('cartModules', ['getCart', 'deleteCart'])\r\n  },\r\n  created () {},\r\n  beforeRouteLeave (to, from, next) {\r\n    if (to.name !== 'OrderInfo' && this.cart.carts.length !== 0) {\r\n      this.$modal.show('dialog', {\r\n        text: `購物車中還有${this.cart.carts.length}筆資料，確定要離開嗎？`,\r\n        buttons: [\r\n          {\r\n            title: '取消',\r\n            handler: () => {\r\n              this.$modal.hide('dialog')\r\n              next(false)\r\n            }\r\n          },\r\n          {\r\n            title: '確定',\r\n            handler: () => {\r\n              next()\r\n            }\r\n          }\r\n        ]\r\n      })\r\n    } else {\r\n      next()\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CheckCart.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CheckCart.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CheckCart.vue?vue&type=template&id=2894acbe&\"\nimport script from \"./CheckCart.vue?vue&type=script&lang=js&\"\nexport * from \"./CheckCart.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}