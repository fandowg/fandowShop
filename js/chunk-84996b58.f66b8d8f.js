(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-84996b58"],{1799:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.products.length>0?i("nav",{attrs:{"aria-label":"Page navigation"}},[i("ul",{staticClass:"pagination"},[i("li",{staticClass:"pagination__item"},[i("a",{staticClass:"pagination__link",class:{disabled:0===t.currentPage},on:{click:function(e){return e.preventDefault(),t.prev(e)}}},[0!==t.currentPage?i("img",{attrs:{src:a("720c")}}):i("img",{attrs:{src:a("4409")}})])]),t._l(t.totalPage,(function(e){return i("li",{key:e,staticClass:"pagination__item"},[i("a",{staticClass:"pagination__link",class:{active:t.currentPage===e-1,disabled:1===t.totalPage},on:{click:function(a){return a.preventDefault(),t.$emit("update:currentPage",e-1)}}},[t._v(t._s(e))])])})),i("li",{staticClass:"pagination__item"},[i("a",{staticClass:"pagination__link",class:{disabled:t.currentPage===t.totalPage-1},on:{click:function(e){return e.preventDefault(),t.next(e)}}},[t.currentPage!==t.totalPage-1?i("img",{attrs:{src:a("d715")}}):i("img",{attrs:{src:a("43ea")}})])])],2)]):t._e()},s=[],r=(a("4160"),a("b64b"),a("159b"),{props:["products","currentPage"],data:function(){return{pageItems:12,totalPage:0}},methods:{next:function(){this.currentPage!==this.totalPage-1&&this.$emit("update:currentPage",this.currentPage+1)},prev:function(){0!==this.currentPage&&this.$emit("update:currentPage",this.currentPage-1)},createPage:function(t){var e=this,a=[],i=[],s=Object.keys(t);s.forEach((function(r,o){i.push(t[r]),0!==o&&(o+1)%e.pageItems===0&&(a.push(i),i=[]),o+1===s.length&&s.length%e.pageItems!==0&&a.push(i)})),this.totalPage=a.length,this.$emit("products-by-page",a)}}}),o=r,n=a("2877"),c=Object(n["a"])(o,i,s,!1,null,null,null);e["a"]=c.exports},"43ea":function(t,e,a){t.exports=a.p+"img/next_page_disabled.7fd955a2.svg"},4409:function(t,e,a){t.exports=a.p+"img/prev_page_disabled.5301e053.svg"},"720c":function(t,e,a){t.exports=a.p+"img/prev_page.8fbf6e37.svg"},"9dd5":function(t){t.exports=JSON.parse('["straw","sport","kid","stainless-steel"]')},d715:function(t,e,a){t.exports=a.p+"img/next_page.cffd41cd.svg"},dc0d:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("EditProduct",{attrs:{"is-new":t.isNew,"temp-product":t.tempProduct},on:{close:t.closeModal,"get-products":t.getProducts}}),a("v-dialog"),a("div",{staticClass:"menu-block menu-block--inline"},[a("h1",{staticClass:"page__title"},[t._v("產品列表")]),a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openModal(!0)}}},[t._v("新增產品")])]),a("div",{staticClass:"admin"},[t._m(0),a("div",{staticClass:"admin__list"},t._l(t.products[t.currentPage],(function(e){return a("div",{key:e.id,staticClass:"admin__row bag-row no-gutters"},[a("div",{staticClass:"admin__item bag-md bag-2 text-center"},[a("img",{attrs:{src:e.imageUrl,alt:"item.title"}})]),a("div",{staticClass:"admin__item admin__title bag-md-4 bag-10"},[t._v(" "+t._s(e.title)+" ")]),a("div",{staticClass:"admin__item bag-md bag-3"},[t._v(" "+t._s(t._f("categoryChangeCn")(e.category))+" ")]),a("div",{staticClass:"admin__item bag-md bag-3 price"},[a("span",{staticClass:"desk-hide-md"},[t._v("原價")]),t._v(t._s(e.origin_price)+" ")]),a("div",{staticClass:"admin__item bag-md bag-3 origin_price"},[a("span",{staticClass:"desk-hide-md"},[t._v("特價")]),t._v(t._s(e.price)+" ")]),a("div",{staticClass:"admin__item bag-md bag-3 text-right-max-md"},[1===e.is_enabled?a("span",[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("div",{staticClass:"admin__item bag-md bag-6 text-right-min-md"},[a("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(a){return t.openModal(!1,e)}}},[t._v(" 編輯 ")])]),a("div",{staticClass:"admin__item bag-md bag-6 text-right"},[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.deleteProduct(e.id,e)}}},[t._v(" 刪除 ")])])])})),0)]),a("Page",{ref:"page",attrs:{products:t.products,"current-page":t.currentPage},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"products-by-page":function(e){t.products=e}}})],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin__head bag-row no-gutters"},[a("div",{staticClass:"admin__item bag-md text-center"},[t._v("圖片")]),a("div",{staticClass:"admin__item admin__title bag-md-4"},[t._v("產品名稱")]),a("div",{staticClass:"admin__item bag-md"},[t._v("分類")]),a("div",{staticClass:"admin__item bag-md"},[t._v("原價")]),a("div",{staticClass:"admin__item bag-md"},[t._v("售價")]),a("div",{staticClass:"admin__item bag-md text-right-max-md"},[t._v("啟用")]),a("div",{staticClass:"admin__item bag-md text-right-min-md"},[t._v("編輯")]),a("div",{staticClass:"admin__item bag-md text-right"},[t._v("刪除")])])}],r=(a("99af"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{name:"editProduct",adaptive:!0,shiftY:.3,maxWidth:800,width:"95%",height:"auto",scrollable:!0}},[i("div",{staticClass:"edit-page"},[i("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var s=e.handleSubmit;return[i("button",{staticClass:"close-position button-none",on:{click:function(e){return t.$emit("close")}}},[i("img",{attrs:{src:a("214b")}})]),i("h2",{staticClass:"edit-page__title"},[t.isNew?i("span",[t._v("新增")]):i("span",[t._v("編輯")]),t._v("產品 ")]),i("div",{staticClass:"edit"},[i("div",{staticClass:"edit__item form-group"},[i("label",[t._v("輸入圖片網址")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.imageUrl,expression:"editTemp.imageUrl"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.editTemp.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.editTemp,"imageUrl",e.target.value)}}})]),i("div",{staticClass:"edit__row form-row"},[i("div",{staticClass:"edit__item bag-md-9 form-group"},[i("label",{staticStyle:{"margin-right":"1rem"}},[t._v("或上傳圖片 "),t.loadStatus.upLoadImage?i("i",{staticClass:"fas fa-circle-notch fa-spin"}):t._e()]),i("input",{ref:"upImage",attrs:{type:"file"},on:{change:t.upLoadImage}})]),t.editTemp.imageUrl?i("div",{staticClass:"edit__item bag-md-3 bag-6 form-group"},[i("img",{attrs:{src:t.editTemp.imageUrl,alt:""}})]):t._e()]),i("div",{staticClass:"edit__item form-group"},[i("ValidationProvider",{attrs:{name:"產品名稱",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.failed,s=e.errors;return[i("label",{attrs:{for:"title"}},[t._v("產品名稱")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.title,expression:"editTemp.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入產品名稱"},domProps:{value:t.editTemp.title},on:{input:function(e){e.target.composing||t.$set(t.editTemp,"title",e.target.value)}}}),a?i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1),i("div",{staticClass:"edit__row form-row"},[i("div",{staticClass:"edit__item bag-6 form-group"},[i("ValidationProvider",{attrs:{name:"分類",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.failed,s=e.errors;return[i("label",{attrs:{for:"category"}},[t._v("分類")]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.category,expression:"editTemp.category"}],staticClass:"form-control",attrs:{name:"category",id:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.editTemp,"category",e.target.multiple?a:a[0])}}},[i("option",{attrs:{disabled:"",value:"null"}},[t._v("請選擇")]),t._l(t.category,(function(e){return i("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(t._f("categoryChangeCn")(e))+" ")])}))],2),a?i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1),i("div",{staticClass:"edit__item bag-6 form-group"},[i("ValidationProvider",{attrs:{name:"單位",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.failed,s=e.errors;return[i("label",{attrs:{for:"unit"}},[t._v("單位")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.unit,expression:"editTemp.unit"}],staticClass:"form-control",attrs:{type:"text",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.editTemp.unit},on:{input:function(e){e.target.composing||t.$set(t.editTemp,"unit",e.target.value)}}}),a?i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1)]),i("div",{staticClass:"edit__row form-row"},[i("div",{staticClass:"edit__item bag-6 form-group"},[i("ValidationProvider",{attrs:{name:"原價",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.failed,s=e.errors;return[i("label",{attrs:{for:"origin_price"}},[t._v("原價")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.origin_price,expression:"editTemp.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.editTemp.origin_price},on:{input:function(e){e.target.composing||t.$set(t.editTemp,"origin_price",e.target.value)}}}),a?i("span",{staticClass:"text-danger"},[t._v(t._s(s[0]))]):t._e()]}}],null,!0)})],1),i("div",{staticClass:"edit__item bag-6 form-group"},[i("label",{attrs:{for:"price"}},[t._v("售價")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.price,expression:"editTemp.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.editTemp.price},on:{input:function(e){e.target.composing||t.$set(t.editTemp,"price",e.target.value)}}})])]),i("div",{staticClass:"edit__row form-row"},[i("div",{staticClass:"edit__item bag-md-6 form-group"},[i("label",{attrs:{for:"description"}},[t._v("產品描述")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.description,expression:"editTemp.description"}],staticClass:"form-control",attrs:{id:"description",cols:"30",rows:"6",placeholder:"請輸入產品描述"},domProps:{value:t.editTemp.description},on:{input:function(e){e.target.composing||t.$set(t.editTemp,"description",e.target.value)}}})]),i("div",{staticClass:"edit__item bag-md-6 form-group"},[i("label",{attrs:{for:"content"}},[t._v("說明內容")]),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.content,expression:"editTemp.content"}],staticClass:"form-control",attrs:{id:"content",cols:"30",rows:"6",placeholder:"請輸入說明內容"},domProps:{value:t.editTemp.content},on:{input:function(e){e.target.composing||t.$set(t.editTemp,"content",e.target.value)}}})])]),i("div",{staticClass:"edit__row form-row"},[i("div",{staticClass:"edit__item bag-6 form-group"},[i("div",{staticClass:"form-check"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.is_enabled,expression:"editTemp.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.editTemp.is_enabled)?t._i(t.editTemp.is_enabled,null)>-1:t._q(t.editTemp.is_enabled,1)},on:{change:function(e){var a=t.editTemp.is_enabled,i=e.target,s=i.checked?1:0;if(Array.isArray(a)){var r=null,o=t._i(a,r);i.checked?o<0&&t.$set(t.editTemp,"is_enabled",a.concat([r])):o>-1&&t.$set(t.editTemp,"is_enabled",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.editTemp,"is_enabled",s)}}}),i("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])]),i("div",{staticClass:"edit__item bag-6 form-group"},[i("div",{staticClass:"form-check"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editTemp.hotProducts,expression:"editTemp.hotProducts"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"hotProducts","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.editTemp.hotProducts)?t._i(t.editTemp.hotProducts,null)>-1:t._q(t.editTemp.hotProducts,1)},on:{change:function(e){var a=t.editTemp.hotProducts,i=e.target,s=i.checked?1:0;if(Array.isArray(a)){var r=null,o=t._i(a,r);i.checked?o<0&&t.$set(t.editTemp,"hotProducts",a.concat([r])):o>-1&&t.$set(t.editTemp,"hotProducts",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.editTemp,"hotProducts",s)}}}),i("label",{staticClass:"form-check-label",attrs:{for:"hotProducts"}},[t._v("是否熱銷")])])])]),i("div",{staticClass:"btn-wrapper-side"},[i("button",{staticClass:"btn btn-outline-primary",on:{click:function(e){return t.$emit("close")}}},[t._v(" 取消 ")]),i("button",{staticClass:"btn btn-primary",on:{click:function(e){return s(t.updateProduct)}}},[t._v(" 送出 ")])])])]}}])})],1)])}),o=[],n=a("5530"),c=a("9dd5"),d={data:function(){return{category:c,loadStatus:{upLoadImage:!1},editTemp:{}}},props:["isNew","tempProduct"],watch:{tempProduct:function(){this.editTemp=Object(n["a"])({},this.tempProduct),this.isNew&&(this.editTemp.category=null)}},methods:{updateProduct:function(){var t=this;if(this.isNew){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/admin/product");this.$store.commit("LOADING",!0),this.$http.post(e,{data:this.editTemp}).then((function(e){e.data.success&&(t.$bus.$emit("message:push",e.data.message),t.$emit("get-products")),t.$emit("close"),t.$store.commit("LOADING",!1)}))}else{if(JSON.stringify(this.editTemp)===JSON.stringify(this.tempProduct))return void this.$emit("close");var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/admin/product/").concat(this.editTemp.id);this.$store.commit("LOADING",!0),this.$http.put(a,{data:this.editTemp}).then((function(e){e.data.success&&(t.$bus.$emit("message:push",e.data.message),t.$emit("get-products")),t.$emit("close"),t.$store.commit("LOADING",!1)}))}},upLoadImage:function(){var t=this,e=this.$refs.upImage.files[0],a=new FormData;a.append("file-to-upload",e);var i="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/admin/upload");this.loadStatus.upLoadImage=!0,this.$http.post(i,a,{headers:{"Content-type":"multipart/form-data"}}).then((function(e){e.data.success?t.$set(t.editTemp,"imageUrl",e.data.imageUrl):t.$bus.$emit("message:push",e.data.message,"text-danger"),t.loadStatus.upLoadImage=!1}))}}},l=d,m=a("2877"),u=Object(m["a"])(l,r,o,!1,null,null,null),p=u.exports,g=a("1799"),_={data:function(){return{products:{},tempProduct:{},isNew:!0,currentPage:0}},watch:{currentPage:function(){this.toTop()}},methods:{getProducts:function(){var t=this;this.$store.commit("LOADING",!0);var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/admin/products/all");this.$http.get(e).then((function(e){e.data.success&&(t.products=e.data.products,t.$refs.page.createPage(e.data.products)),t.$store.commit("LOADING",!1)}))},deleteProduct:function(t,e){var a=this;this.$modal.show("dialog",{text:"確定要刪除<br>「".concat(e.title,"」嗎？"),buttons:[{title:"取消",handler:function(){a.$modal.hide("dialog")}},{title:"確定",handler:function(){var e="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/admin/product/").concat(t);a.$store.commit("LOADING",!0),a.$http.delete(e).then((function(t){t.data.success?(a.$bus.$emit("message:push",t.data.message),a.getProducts()):a.$bus.$emit("message:push",t.data.message,"text-danger"),a.$modal.hide("dialog"),a.$store.commit("LOADING",!1)}))}}]})},openModal:function(t,e){t?(this.tempProduct={is_enabled:0,category:"default"},this.isNew=t):(this.tempProduct=e,this.isNew=t),this.$modal.show("editProduct")},closeModal:function(){this.$modal.hide("editProduct")},toTop:function(){document.documentElement.scrollTop=0}},components:{EditProduct:p,Page:g["a"]},created:function(){this.getProducts(1)}},v=_,f=Object(m["a"])(v,i,s,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-84996b58.f66b8d8f.js.map