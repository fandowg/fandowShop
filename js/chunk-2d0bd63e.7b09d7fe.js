(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bd63e"],{"2c90":function(t,a,s){"use strict";s.r(a);var c=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("main",{staticClass:"page page--pt container-lg"},[s("v-dialog"),s("h1",{staticClass:"page__title"},[t._v("購物車清單")]),0===t.cart.carts.length?s("div",[s("p",[t._v("您的購物車還沒有任何內容，趕快來挑選你喜歡的水瓶吧")]),s("router-link",{staticClass:"btn btn-primary",attrs:{to:"/product-list"}},[t._v("前往購物")])],1):s("div",[s("div",{staticClass:"cart"},[t._m(0),s("div",{staticClass:"cart__list"},t._l(t.cart.carts,(function(a){return s("div",{key:a.id,staticClass:"cart__row bag-row no-gutters"},[s("div",{staticClass:"cart__item bag-md-2 bag-3 cart__img"},[s("img",{attrs:{src:a.product.imageUrl,alt:a.product.title}})]),s("div",{staticClass:"bag-7 bag-md-8 bag-row no-gutters cart__group"},[s("div",{staticClass:"cart__item cart__title bag-md-8"},[t._v(" "+t._s(a.product.title)),s("br"),a.coupon?s("span",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),s("div",{staticClass:"cart__item cart__num bag-md-4"},[s("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(s){return t.addToCart(a.product_id,-1)}}},[t._v(" - ")]),s("span",{staticClass:"cart__num__content"},[t._v(t._s(a.qty))]),s("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{disabled:a.qty>=t.maxQty},on:{click:function(s){return t.addToCart(a.product_id,1)}}},[t._v(" + ")])])]),s("div",{staticClass:"bag bag-row no-gutters cart__group"},[s("div",{staticClass:"cart__item bag-md-9 cart__price"},[t._v(" "+t._s(t._f("currency")(a.final_total))+" ")]),s("div",{staticClass:"cart__item bag-md-3 cart__delete"},[s("button",{staticClass:"button-none",on:{click:function(s){return t.deleteCart(a.id)}}},[s("i",{staticClass:"fas fa-trash"})])])])])})),0),s("div",{staticClass:"cart__bottom"},[s("div",{staticClass:"coupon"},[s("div",{staticClass:"input-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon,expression:"coupon"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon},on:{input:function(a){a.target.composing||(t.coupon=a.target.value)}}}),s("button",{staticClass:"btn btn-outline-primary",on:{click:t.checkCoupon}},[t._v(" 套用 ")])]),t.couponSuccess?t._e():s("span",{staticClass:"text-danger-message"},[t._v(" "+t._s(t.errorMessage))])]),s("div",{staticClass:"cart__total"},[t.cart.total!==t.cart.final_total?s("div",{staticClass:"cart__total__row"},[s("span",{staticClass:"cart__total__row__title"},[t._v("總額：")]),s("span",{staticClass:"cart__total__row__content"},[t._v(" "+t._s(t._f("currency")(t.cart.total)))])]):t._e(),t.cart.total!==t.cart.final_total?s("div",{staticClass:"cart__total__row"},[s("span",{staticClass:"cart__total__row__title"},[t._v("折扣：")]),s("span",{staticClass:"cart__total__row__content text-success"},[t._v(" "+t._s(t._f("currency")(t.cart.total-t.cart.final_total))+" ")])]):t._e(),s("div",{staticClass:"cart__total__row"},[s("span",{staticClass:"cart__total__row__title"},[t._v("應付：")]),s("span",{staticClass:"cart__total__row__content text-danger"},[t._v(" "+t._s(t._f("currency")(t.cart.final_total))+" ")])])])])]),s("div",{staticClass:"btn-wrapper-side delete-spacer"},[s("router-link",{staticClass:"btn btn-outline-primary",attrs:{to:"/product-list"}},[t._v("繼續購物")]),s("router-link",{staticClass:"btn btn-primary",attrs:{to:"/order/order-info"}},[t._v("確認送出")])],1)])],1)},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"cart__head bag-row no-gutters"},[s("div",{staticClass:"cart__item"},[t._v("產品")]),s("div",{staticClass:"cart__item"},[t._v("數量")]),s("div",{staticClass:"cart__item"},[t._v("價格")])])}],o=(s("99af"),s("b0c0"),s("5530")),e=s("2f62"),i={data:function(){return{coupon:"",errorMessage:"",couponSuccess:!0,maxQty:"10"}},computed:Object(o["a"])({},Object(e["c"])("cartModules",["cart"])),methods:Object(o["a"])({checkCoupon:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("fandow","/coupon");this.$store.commit("LOADING",!0),this.$http.post(a,{data:{code:this.coupon}}).then((function(a){a.data.success?(t.couponSuccess=!0,t.getCart()):(t.couponSuccess=!1,t.errorMessage=a.data.message),t.$store.commit("LOADING",!1)}))},addToCart:function(t,a){this.$store.dispatch("cartModules/addToCart",{id:t,qty:a})}},Object(e["b"])("cartModules",["getCart","deleteCart"])),created:function(){},beforeRouteLeave:function(t,a,s){var c=this;"OrderInfo"!==t.name&&0!==this.cart.carts.length?this.$modal.show("dialog",{text:"購物車中還有".concat(this.cart.carts.length,"筆資料，確定要離開嗎？"),buttons:[{title:"取消",handler:function(){c.$modal.hide("dialog"),s(!1)}},{title:"確定",handler:function(){s()}}]}):s()}},n=i,_=s("2877"),l=Object(_["a"])(n,c,r,!1,null,null,null);a["default"]=l.exports}}]);
//# sourceMappingURL=chunk-2d0bd63e.7b09d7fe.js.map